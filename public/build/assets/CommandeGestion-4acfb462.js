import{I as F,T as v,d as b,E as N,m as l,e as d,b as n,a as e,w as h,t as a,g as u,A as R,J as z,f as G,u as i,p as I,n as A,o as c,F as O,j as q}from"./app-1cf49233.js";import{_ as J}from"./FreelanceLayout-f059bb7d.js";import"./MainSidebarF-f3320e9c.js";import"./userInfo-ab12f6d2.js";const Z={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 md:max-w-7xl md:container px-auto bg-inherit"},H={class:"flex flex-col"},K={class:"flex","aria-label":"Breadcrumb"},Q={class:"inline-flex items-center space-x-1 md:space-x-3"},W={class:"inline-flex items-center"},X=e("svg",{class:"w-3 h-3 mr-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),Y={"aria-current":"page"},ee=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),te=e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},"Commande",-1),se={"aria-current":"page"},ae={class:"flex items-center"},oe=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ne={class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},re=e("h1",{class:"mt-4 text-3xl font-bold text-black dark:text-white"},"Commandes Gestion",-1),le={class:"lg:mx-auto lg:max-w-8xl"},de={class:"relative overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800"},ie={class:"grid grid-cols-1 px-6 py-4 md:grid-cols-2"},ce={class:"mb-2 text-lg text-gray-800 font-inter dark:text-gray-200"},me={class:"mb-2 text-lg"},pe=e("span",{class:"text-gray-600 dark:text-gray-300"},"Service : ",-1),ue={class:"text-lg text-gray-800 dark:text-gray-200"},_e={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},ge={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},xe={class:"text-green-600"},he={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},ve={class:"font-bold text-green-600"},be={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},fe={key:0,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},ye={key:1,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},ke={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},we={key:0,class:"font-bold text-green-600"},Ce={key:1,class:"font-bold text-yellow-200"},Ve={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},Ee={class:"font-bold text-green-600"},Le={class:"px-6 py-4 bcommande-t bcommande-gray-200"},Se=e("p",{class:"mb-2 text-lg text-gray-800"},"Client ",-1),Be={class:"flex items-center"},je={class:"ml-4"},De={class:"text-sm text-gray-600 dark:text-gray-300"},Me={class:"text-sm text-gray-600 dark:text-gray-300"},Te={"x-data":"{open:false}",class:"px-6 py-4 bcommande-t bcommande-gray-200"},Pe=e("h2",{class:"mb-4 text-lg font-semibold"},"Gestion de Commande",-1),Ue={key:0},$e=e("h1",{class:"mb-4 text-gray-800 dark:text-gray-200"},"Vous avez deja livrer (realiser) la commande",-1),Fe=e("div",{class:"mb-4"},[e("h1",{class:"text-gray-800 dark:text-gray-200"},"Le Feedback du client")],-1),Ne={class:"p-4 mb-4 bg-gray-100 rounded-lg dark:bg-gray-700"},Re={class:"text-sm text-gray-700 md:text-base dark:text-gray-300"},ze={class:"flex items-center my-4"},Ge=e("svg",{class:"w-4 h-4 mr-1 text-yellow-500 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M10 14.155L4.284 17.84l.828-5.076L.898 7.865l5.059-.736L10 2l2.043 5.129 5.059.736-3.215 3.9.828 5.076z"})],-1),Ie={class:"text-sm font-semibold text-gray-700 dark:text-gray-100"},Ae={class:"flex items-center gap-3 mb-4"},Oe={class:"font-bold text-gray-800 dark:text-gray-100"},qe={class:"flex gap-4"},Je={key:0},Ze={class:"relative inline-flex items-center cursor-pointer"},He=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:bcommande-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:bcommande-gray-300 after:bcommande after:rounded-full after:h-5 after:w-5 after:transition-all dark:bcommande-gray-600 peer-checked:bg-blue-600"},null,-1),Ke=e("span",{class:"ml-3 text-sm font-medium text-gray-400 dark:text-gray-500"},"Publier",-1),Qe=e("div",{class:"mb-2"},null,-1),We={key:1,class:""},Xe={class:"grid gap-4 mb-4 lg:grid-cols-3"},Ye={class:"w-full"},et={class:"flex items-center justify-center"},tt={class:"w-full p-4 bg-white rounded-lg shadow-md bcommande-t bcommande-gray-200 dark:bg-gray-800"},st=e("label",{class:"text-sm font-semibold",for:"progress"},"Rapport d'avancement",-1),at=e("button",{type:"submit",class:"self-end px-4 py-2 mb-3 text-white bg-blue-500 rounded-md"},[e("span",null,"Soumettre")],-1),ot={"x-data":"{open:false}",class:"relative mb-3"},nt={class:"mb-0"},rt=e("span",null,"Rapport Envoyer",-1),lt={class:"p-4 mb-3 text-sm leading-normal rapport"},dt={class:"p-3 bcommande-b bcommande-gray-400"},it={class:"mb-3 text-base text-gray-600 cursor-pointer dark:text-gray-300"},ct=e("div",{"x-collapse":"","x-show":"show",class:"p-2"},null,-1),gt=Object.assign({layout:J},{__name:"CommandeGestion",props:{commande:Object},setup(C){const r=C,g=F(),_=v({description:"",order_id:r.commande.data.id}),m=v({etat:r.commande.data.feedback.etat,progression:r.commande.data.progress,delai:r.commande.data.feedback.delai_livraison_estimee,order_id:r.commande.data.id}),x=b(!1),V=()=>{m.post(route("commande.feedback"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.add({severity:"success",summary:"Message",detail:"Feedback enviyer avec success",group:"br",life:3e3})},onError:p=>{g.add({severity:"error",summary:"Message",detail:p.message,group:"br",life:3e3})}})},E=()=>{_.post(route("commande.rapport"),{preserveScroll:!0,onSuccess:()=>{_.reset(),g.add({severity:"info",summary:"Message",detail:"Rapport envoyer",group:"br",life:3e3})},onError:p=>{p.message!=null&&g.add({severity:"error",summary:"Message",detail:p.message,group:"br",life:3e3})}})},L=b([{name:"En attente de traitement",code:"En attente de traitement"},{name:"En cours de préparation",code:"En cours de préparation"},{name:"En transit",code:"En transit"},{name:"Livré",code:"Livré"}]),S=b([{name:"10 %",code:10},{name:"30 %",code:30},{name:"50 %",code:50},{name:"70 %",code:70},{name:"90 %",code:90},{name:"100 %",code:100}]),B=v({order_id:r.commande.data.id}),j=()=>{B.post(route("publishCommentaire"),{preserveScroll:!0})},t=N(()=>r.commande.data);return(p,s)=>{const D=l("Toast"),f=l("Link"),y=l("Photo"),k=l("Dropdown"),w=l("InputError"),M=l("Calendar"),T=l("Button"),P=l("Textarea"),U=l("Span"),$=l("Collapse");return c(),d("div",Z,[n(D,{position:"bottom-right",group:"br"}),e("div",H,[e("div",null,[e("nav",K,[e("ol",Q,[e("li",W,[n(f,{href:p.route("freelance.dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:h(()=>[X,u(" Dashboard ")]),_:1},8,["href"])]),e("li",Y,[n(f,{href:p.route("freelance.commandes"),class:"flex items-center"},{default:h(()=>[ee,te]),_:1},8,["href"])]),e("li",se,[e("div",ae,[oe,e("span",ne,a(t.value.order_numero),1)])])])])]),re]),e("div",null,[e("div",le,[e("div",de,[e("div",ie,[e("p",ce,"Commande #"+a(t.value.order_numero),1),e("p",me,[pe,e("span",ue,a(t.value.service.title),1)]),e("p",_e,"Date de commande : "+a(t.value.created_at),1),e("p",ge,[u("Date de livraison : "),e("span",xe,a(t.value.feedback.delai_livraison_estimee),1)]),e("p",he,[u("Paiement : "),e("span",ve,a(t.value.status),1)]),e("p",be,[u("Versement : "),t.value.is_paid!=null?(c(),d("span",fe,a(t.value.is_paid),1)):(c(),d("span",ye,"en Attente"))]),e("p",ke,[u("statut : "),t.value.feedback.etat=="Livré"?(c(),d("span",we,a(t.value.feedback.etat),1)):(c(),d("span",Ce,a(t.value.feedback.etat),1))]),e("p",Ve,[u("Progression : "),e("span",Ee,a(t.value.progress)+" %",1)])]),e("div",Le,[Se,e("div",Be,[n(y,{user:t.value.user},null,8,["user"]),e("div",je,[e("p",De,a(t.value.user.name),1),e("p",Me,a(t.value.user.email),1)])])]),e("div",Te,[Pe,t.value.feedback.etat=="Livré"&&t.value.progress==100?(c(),d("div",Ue,[$e,Fe,e("div",Ne,[e("p",Re,a(t.value.feedback.commentaires?t.value.feedback.commentaires:"pas de commentaire"),1),e("div",ze,[Ge,e("span",Ie,"("+a(t.value.feedback.satisfaction?t.value.feedback.satisfaction:0)+") ",1)]),e("div",Ae,[n(y,{user:t.value.user},null,8,["user"]),e("p",Oe,a(t.value.user.name),1)]),e("div",qe,[t.value.feedback.commentaires!=null?(c(),d("div",Je,[e("label",Ze,[R(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=o=>r.commande.data.feedback.is_publish=o),class:"sr-only peer",onChange:s[1]||(s[1]=o=>j())},null,544),[[z,r.commande.data.feedback.is_publish]]),He,Ke])])):G("",!0),Qe])])])):(c(),d("div",We,[e("div",Xe,[e("div",null,[n(k,{modelValue:i(m).etat,"onUpdate:modelValue":s[2]||(s[2]=o=>i(m).etat=o),options:L.value,optionValue:"name",showClear:"",optionLabel:"name",placeholder:"Etat de la commande",class:"!w-full"},null,8,["modelValue","options"])]),e("div",null,[n(k,{modelValue:i(m).progression,"onUpdate:modelValue":s[3]||(s[3]=o=>i(m).progression=o),options:S.value,optionLabel:"name",optionValue:"code",placeholder:"pourcentage",showClear:"",class:"!w-full"},null,8,["modelValue","options"]),n(w,{message:i(m).errors.progression},null,8,["message"])]),e("div",Ye,[n(M,{modelValue:i(m).delai,"onUpdate:modelValue":s[4]||(s[4]=o=>i(m).delai=o),placeholder:"date de livraison",class:"w-full"},null,8,["modelValue"])])]),e("div",et,[n(T,{onClick:s[5]||(s[5]=o=>V()),label:"Soumettre"})])]))]),e("div",tt,[e("form",{onSubmit:s[7]||(s[7]=I(o=>E(),["prevent"])),class:"flex flex-col p-3 space-y-4"},[st,n(P,{required:"",modelValue:i(_).description,"onUpdate:modelValue":s[6]||(s[6]=o=>i(_).description=o)},null,8,["modelValue"]),n(w,{message:i(_).errors.description},null,8,["message"]),at],32),e("div",null,[e("div",ot,[e("h6",nt,[e("button",{onClick:s[8]||(s[8]=o=>x.value=!x.value),class:"relative flex items-center w-full p-4 text-base font-semibold text-left text-gray-600 transition-all ease-in cursor-pointer bcommande-b bcommande-solid bcommande-slate-100 dark:text-gray-500 rounded-t-1 group text-dark-500","data-collapse-target":"animated-collapse-1"},[rt,e("i",{class:A([x.value?"rotate-180 transition-transform":"","absolute right-0 pt-1 text-base transition-transform fa fa-chevron-down"])},null,2)])]),n($,{when:x.value},{default:h(()=>[e("div",lt,[(c(!0),d(O,null,q(r.commande.data.rapports,o=>(c(),d("div",dt,[e("div",it,a(o.description),1),n(U,{class:"mt-4 text-sm text-gray-500"},{default:h(()=>[u(a(o.created_at),1)]),_:2},1024),ct]))),256))])]),_:1},8,["when"])])])])])])])])}}});export{gt as default};
