import{aq as K,d as S,B as n,K as B,A as f,o as d,e as y,F as $,j as x,n as g,a as b,S as A,c as L,w as Y,g as Z,t as G,p as J}from"./app-5460a236.js";import{C as Q,p as o,v as w,y as R}from"./MazPicker-KEFEA2or-1cd0000e.js";import U from"./MazBtn-2B_gHtFc-79ca9fde.js";const W={class:"m-picker-time__column__items"},X=K({__name:"MazPickerTime",props:{modelValue:{type:[String,Object],default:void 0},calendarDate:{type:String,required:!0},formatterOptions:{type:Object,required:!0},locale:{type:String,required:!0},color:{type:String,required:!0},isOpen:{type:Boolean,required:!0},hasDate:{type:Boolean,required:!0},minuteInterval:{type:Number,required:!0},disabledHours:{type:Array,default:void 0},format:{type:String,required:!0},isHour12:{type:Boolean,required:!0},minDate:{type:String,default:void 0},maxDate:{type:String,default:void 0},disabled:{type:Boolean,required:!0}},emits:["update:model-value"],setup(c,{emit:C}){const i=c,j=e=>{if(!i.disabledHours)return e;const a=Array.from({length:24},(r,u)=>u).filter(r=>{var u;return!((u=i.disabledHours)!=null&&u.includes(r))||!0}),t=w(a,e);return t!==e&&H("hour",o(l.value).set("hour",t)),t},z=C,s=S(),m=S(),v=n(()=>typeof l.value=="string"?j(o(l.value).get("hour")):void 0),M=n(()=>typeof l.value=="string"?w(k.value.map(({value:e})=>e.get("minute")),o(l.value).get("minute")):void 0),T=e=>{if(i.isHour12){const a=h.value==="pm"?e+12:e;return a===12?0:a===24?12:a}else return e},V=n(()=>Array.from({length:i.isHour12?12:24},(e,a)=>a).map(e=>{const a=e+(i.isHour12?1:0),t=T(a),r=o(l.value).set("hour",t),u=N(t)||(i.minDate&&l.value?o(i.minDate).isAfter(r,"hour"):!1)||(i.maxDate&&l.value?o(i.maxDate).isBefore(r,"hour"):!1);return{label:`${a<10?"0":""}${a}`,value:o(l.value).set("hour",t),isDisabled:u}})),k=n(()=>{const e=Math.floor(60/i.minuteInterval)-0;return Array.from({length:e},(a,t)=>t*i.minuteInterval).map(a=>{const t=o(l.value).set("minute",a),r=(i.minDate&&l.value?o(i.minDate).isAfter(t,"minute"):!1)||(i.maxDate&&l.value?o(i.maxDate).isBefore(t,"minute"):!1);return{label:`${a<10?"0":""}${a}`,value:t,isDisabled:r}})}),h=n(()=>typeof v.value=="number"?v.value>=12?"pm":"am":void 0),I=n(()=>i.isHour12?[{label:"AM",value:"am"},{label:"PM",value:"pm"}]:[]),O=n(()=>{const e=[{identifier:"hour",values:V.value},{identifier:"minute",values:k.value}];return i.isHour12&&e.push({identifier:"ampm",values:I.value}),e}),l=n({get:()=>i.modelValue,set:e=>{z("update:model-value",e)}});B(()=>i.isOpen,async e=>{var a;if(e){if(await f(),s.value){const t=s.value.querySelector(".m-picker-time__column .m-btn"),r=t==null?void 0:t.offsetHeight,u=((a=s.value)==null?void 0:a.offsetHeight)/2-r/2;m.value=u/16}D(!1)}},{immediate:!0}),B(()=>i.modelValue,async(e,a)=>{e!==a&&(await f(),D(!0))},{immediate:!0});const D=e=>{p("hour",e),p("minute",e),i.isHour12&&p("ampm",e)},N=e=>(i.disabledHours&&i.disabledHours.includes(e))??!1,q=(e,a)=>a==="am"||a==="pm"?h.value===a:e==="hour"?v.value===a.get(e):e==="minute"?M.value===a.get(e):!1,p=async(e,a=!0)=>{if(s.value){const t=s.value.querySelector(`.m-picker-time__column__${e}`),r=s.value.querySelector(`.m-picker-time__column__${e} .--is-selected`);m.value&&t&&r&&s.value&&(await f(),R(t,r,m.value*16,a))}},H=async(e,a)=>{const t=o(l.value);if(e==="hour"&&typeof a=="object"&&(l.value=t.set("hour",a.get("hour")).format()),e==="minute"&&typeof a=="object"){const r=t.set("minute",a.get("minute"));l.value=r.format()}if(e==="ampm"&&(h.value!==a||!v.value)&&(a==="am"&&(l.value=t.set("hour",t.get("hour")).subtract(12,"hour").format()),a==="pm")){const r=t.get("hour"),u=r+12>12&&r+12<24?r+12:r===0?12:r;l.value=t.set("hour",u).format()}await f(),p(e)};return(e,a)=>(d(),y("div",{ref_key:"MazPickerTime",ref:s,class:g(["m-picker-time",{"--has-date":c.hasDate}])},[(d(!0),y($,null,x(O.value,({values:t,identifier:r},u)=>(d(),y("div",{key:u,class:g(["m-picker-time__column",[`m-picker-time__column__${r}`]])},[b("div",{style:A({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4),b("div",W,[(d(!0),y($,null,x(t,({value:_,label:P,isDisabled:F},E)=>(d(),L(U,{key:E,size:"xs",color:q(r,_)?c.color:"transparent",class:g({"--is-selected":q(r,_)}),disabled:F||c.disabled,type:"button",onClick:J(ee=>H(r,_),["stop"])},{default:Y(()=>[Z(G(P),1)]),_:2},1032,["color","class","disabled","onClick"]))),128))]),b("div",{style:A({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4)],2))),128))],2))}}),ie=Q(X,[["__scopeId","data-v-c85d4cb7"]]);export{ie as default};
