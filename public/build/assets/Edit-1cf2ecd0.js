import{I as R,L as Z,d as U,E as h,T as B,M as H,m as a,e as b,b as s,a as e,w as u,u as i,t as J,o as w,g as K,z as T,p as Q,F as X,j as Y,O as ee}from"./app-734f03f5.js";import{_ as se}from"./FreelanceLayout-ec41ddd9.js";import"./MainSidebarF-b8a1db74.js";import"./userInfo-23b80749.js";const te={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 md:max-w-7xl md:container px-auto bg-inherit"},oe={class:"flex flex-col"},le={class:"flex","aria-label":"Breadcrumb"},ie={class:"inline-flex items-center space-x-1 md:space-x-3"},re={class:"inline-flex items-center"},ae=e("svg",{class:"w-3 h-3 mr-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),de={"aria-current":"page"},ne=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ce=e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},"Services",-1),ue={"aria-current":"page"},me={class:"flex items-center"},pe=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ve={class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},_e=e("h1",{class:"mt-4 text-3xl font-bold text-black dark:text-white"},"Modifier",-1),ge={class:"grid lg:grid-cols-2 gap-2"},fe={class:"w-full col-span-1 mb-4"},he={class:"col-span-1 mb-4"},be={class:"grid lg:grid-cols-2 gap-2"},we={class:"mt-4 W-full"},xe={class:"mt-4 W-full"},ye={class:"grid lg:grid-cols-2 gap-2"},Ve={class:"w-full col-span-1 mb-4"},Se={class:"w-full col-span-1 mb-4"},ke={class:"grid lg:grid-cols-2 gap-2 mt-4"},Ce={class:"w-full col-span-2 mb-4"},Ie={class:"w-full col-span-2 mb-4"},Ue={class:"grid lg:grid-cols-2 gap-2"},Be={class:"w-full col-span-1 mb-4"},Te={class:"w-full col-span-1 mb-4"},Me={class:"grid lg:grid-cols-2 gap-2"},Le={class:"w-full col-span-1 mb-4"},je={class:"w-full col-span-1 mb-4"},qe={class:"grid lg:grid-cols-2 gap-2"},Ee={class:"w-full col-span-1 mb-4"},Pe={class:"flex flex-wrap mt-4 space-x-2"},Fe={class:"relative group"},ze=["src"],De={class:"absolute top-0 right-0 mt-2 mr-2"},Ne={class:"grid lg:grid-cols-2 gap-2 mt-4"},$e={class:"w-full col-span-2 mb-4"},Oe={class:"flex flex-wrap flex-1 gap-2 justify-content-between align-items-center"},Ae={class:"flex gap-2"},Ge=e("p",null,"Tirez et déposez des fichiers ici pour les télécharger.",-1),Ke=Object.assign({layout:se},{__name:"Edit",props:{service:Object},setup(M){var x;const r=M,m=R(),_=Z(),p=U(r.service.data.category_id),L=h(()=>r.service.data.files),o=B({title:r.service.data.title,tag:r.service.data.tag,basic_price:parseInt(r.service.data.basic_price),basic_revision:r.service.data.basic_revision,need_service:r.service.data.need_service,sub_category:(x=r.service.data.sub_category)==null?void 0:x.map(n=>parseInt(n)),description:r.service.data.description,category_id:r.service.data.category_id,sub_categorie:r.service.data.sub_category,video_url:r.service.data.video_url,basic_support:r.service.data.basic_support,basic_delivery_time:r.service.data.basic_delivery_time,delivery_time_unit:r.service.data.delivery_time_unit,is_publish:r.service.data.is_publish,service_id:r.service.data.id}),j=U([{name:"jour(s)",id:"jour(s)"},{name:"heure(s)",id:"heure(s)"}]),q=()=>{o.post(route("freelance.services.edition.save"),{onSuccess:()=>{m.add({severity:"info",summary:"Message",detail:"Modification reuissie",group:"br",life:1e3})},onError:n=>{m.add({severity:"error",summary:"Message",detail:n.message,group:"br",life:3e3})}})},E=h(()=>_.categoriesGet.categories),P=h(()=>_.subCategoriesGet),F=async()=>{_.fetchSubCategoriesByCategoryid(p.value)};H(p,()=>{o.category_id=p.value,F()});const g=B({files:null,service_id:r.service.data.id}),z=()=>{},D=()=>{g.files!=null?g.post(route("addImageService"),{onFinish:()=>z(),preserveScroll:!0}):m.add({severity:"error",summary:"Message",detail:"veuillez choisir une photo",group:"br",life:1e3})},N=n=>{g.files=n.files},$=n=>{ee.post(route("removeFileService"),{file_index:n,service_id:r.service.data.id},{preserveScroll:!0,onSuccess:()=>{m.add({severity:"info",summary:"Message",detail:"Photo supprimer",group:"br",life:1e3})},onError:t=>{m.add({severity:"error",summary:"Message",detail:t.message,group:"br",life:1e3})}})};return(n,t)=>{const O=a("Toast"),d=a("InputLabel"),y=a("InputText"),V=a("Chips"),S=a("Dropdown"),c=a("InputError"),A=a("MultiSelect"),f=a("InputNumber"),k=a("Editor"),G=a("InputSwitch"),v=a("Button"),C=a("Panel"),W=a("FileUpload");return w(),b("div",te,[s(O,{position:"bottom-right",group:"br"}),e("div",oe,[e("div",null,[e("nav",le,[e("ol",ie,[e("li",re,[s(i(T),{href:n.route("freelance.dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:u(()=>[ae,K(" Dashboard ")]),_:1},8,["href"])]),e("li",de,[s(i(T),{href:n.route("freelance.services"),class:"flex items-center"},{default:u(()=>[ne,ce]),_:1},8,["href"])]),e("li",ue,[e("div",me,[pe,e("span",ve,J(r.service.data.service_numero),1)])])])])]),_e]),e("div",null,[s(C,{header:"Service information",toggleable:"",class:"mt-8"},{default:u(()=>[e("form",{onSubmit:t[13]||(t[13]=Q(l=>q(),["prevent"])),class:"grid grid-cols-1 gap-4 p-4 border rounded-md dark:border-gray-300 min-h-72"},[e("div",ge,[e("div",fe,[s(d,{for:"titre",value:"titre"}),s(y,{required:"",modelValue:i(o).title,"onUpdate:modelValue":t[0]||(t[0]=l=>i(o).title=l),class:"w-full",id:"titre"},null,8,["modelValue"])]),e("div",he,[s(d,{for:"titre",value:"Tags de recherche"}),s(V,{modelValue:i(o).tag,"onUpdate:modelValue":t[1]||(t[1]=l=>i(o).tag=l),placeholder:"Tags pour facileter la recherche",class:"w-full",id:"tag"},null,8,["modelValue"])])]),e("div",be,[e("div",we,[s(S,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=l=>p.value=l),optionValue:"id",required:"",options:E.value,showClear:"",optionLabel:"name",placeholder:"Categories",class:"!w-full"},null,8,["modelValue","options"]),s(c,{class:"mt-2",message:i(o).errors.category_id},null,8,["message"])]),e("div",xe,[s(A,{modelValue:i(o).sub_category,"onUpdate:modelValue":t[3]||(t[3]=l=>i(o).sub_category=l),optionValue:"id",options:P.value,showClear:"",optionLabel:"name",placeholder:"Sous categorie",class:"!w-full"},null,8,["modelValue","options"]),s(c,{class:"mt-2",message:i(o).errors.sub_category},null,8,["message"])])]),e("div",ye,[e("div",Ve,[s(d,{for:"titre",value:"Prix"}),s(f,{showButtons:"",modelValue:i(o).basic_price,"onUpdate:modelValue":t[4]||(t[4]=l=>i(o).basic_price=l),placeholder:"Prix du service",class:"w-full",inputId:"Prix"},null,8,["modelValue"]),s(c,{class:"mt-2",message:i(o).errors.basic_price},null,8,["message"])]),e("div",Se,[s(d,{for:"revision",value:"Revision"}),s(f,{showButtons:"",modelValue:i(o).basic_revision,"onUpdate:modelValue":t[5]||(t[5]=l=>i(o).basic_revision=l),class:"w-full",placeholder:"nombre de revision pour ce prix",id:"titre"},null,8,["modelValue"]),s(c,{class:"mt-2",message:i(o).errors.basic_revision},null,8,["message"])])]),e("div",ke,[e("div",Ce,[s(d,{for:"description",value:"Description"}),s(k,{required:"",formats:null,modelValue:i(o).description,"onUpdate:modelValue":t[6]||(t[6]=l=>i(o).description=l),class:"mt-2",placeholder:"une Description pour ce service",editorStyle:"height: 250px"},null,8,["modelValue"]),s(c,{class:"mt-2",message:i(o).errors.description},null,8,["message"])]),e("div",Ie,[s(d,{for:"titre",value:"Besoin"}),s(k,{required:"",modelValue:i(o).need_service,"onUpdate:modelValue":t[7]||(t[7]=l=>i(o).need_service=l),class:"mt-2",ceholder:"vous besoin de quoi pour la realisation de ce service",editorStyle:"height: 250px"},null,8,["modelValue"]),s(c,{class:"mt-2",message:i(o).errors.need_service},null,8,["message"])])]),e("div",Ue,[e("div",Be,[s(d,{for:"support",value:"support"}),s(V,{required:"",modelValue:i(o).basic_support,"onUpdate:modelValue":t[8]||(t[8]=l=>i(o).basic_support=l),placeholder:"Le support du service",class:"w-full mt-2",id:"support"},null,8,["modelValue"]),s(c,{class:"mt-2",message:i(o).errors.basic_support},null,8,["message"])]),e("div",Te,[s(d,{for:"titre",value:"titre"}),s(y,{modelValue:i(o).video_url,"onUpdate:modelValue":t[9]||(t[9]=l=>i(o).video_url=l),placeholder:"lien d'une video du  service",class:"w-full mt-2",id:"titre"},null,8,["modelValue"])])]),e("div",Me,[e("div",Le,[s(d,{for:"temps",value:"Temps"}),s(f,{required:"",modelValue:i(o).basic_delivery_time,"onUpdate:modelValue":t[10]||(t[10]=l=>i(o).basic_delivery_time=l),showButtons:"",placeholder:"Temps de livraison",class:"w-full mt-2",id:"titre"},null,8,["modelValue"])]),e("div",je,[s(d,{for:"titre",value:"titre"}),s(S,{required:"",modelValue:i(o).delivery_time_unit,"onUpdate:modelValue":t[11]||(t[11]=l=>i(o).delivery_time_unit=l),optionValue:"id",options:j.value,showClear:"",optionLabel:"name",placeholder:"Unite de temps en heures ou jours",class:"!w-full mt-2"},null,8,["modelValue","options"])])]),e("div",qe,[e("div",Ee,[s(d,{for:"titre",value:"Publier"}),s(G,{class:"mt-2",required:"",modelValue:i(o).is_publish,"onUpdate:modelValue":t[12]||(t[12]=l=>i(o).is_publish=l),id:"titre"},null,8,["modelValue"])])]),e("div",null,[s(v,{type:"submit",label:"Soumettre"})])],32)]),_:1}),s(C,{header:"Image",toggleable:"",class:"mt-8"},{default:u(()=>[e("div",null,[e("div",Pe,[(w(!0),b(X,null,Y(L.value,(l,I)=>(w(),b("div",null,[e("div",Fe,[e("img",{src:"/storage/"+l,alt:"Product Name",class:"w-16 h-full border rounded-md cursor-pointer lg:w-24 2xl:w-24 hover:opacity-80"},null,8,ze),e("div",De,[s(v,{onClick:We=>$(I),size:"small",outlined:"",icon:"pi pi-trash"},null,8,["onClick"])])])]))),256))])]),e("div",Ne,[e("div",$e,[s(d,{for:"titre",class:"mb-4",value:"Image"}),s(W,{showCancelButton:!1,auto:!0,class:"",fileLimit:3,onSelect:N,onUpload:t[14]||(t[14]=l=>n.onAdvancedUpload(l)),multiple:!0,accept:"image/*",maxFileSize:1e6},{header:u(({chooseCallback:l})=>[e("div",Oe,[e("div",Ae,[s(v,{onClick:I=>l(),icon:"pi pi-images",rounded:"",outlined:""},null,8,["onClick"])])])]),empty:u(()=>[Ge]),_:1})])]),e("div",null,[s(v,{onClick:t[15]||(t[15]=l=>D()),label:"Changer"})])]),_:1})])])}}});export{Ke as default};
