import{D as $,T as w,d as v,y as F,A as r,e as l,b as n,a as e,w as h,t as s,g as u,f as N,u as d,l as R,n as U,o as i,F as z,j as G}from"./app-211ec483.js";import{_ as A}from"./FreelanceLayout-734a855f.js";import"./MainSidebarF-e3228c86.js";import"./userInfo-a5293e16.js";const I={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 md:max-w-7xl md:container px-auto bg-inherit"},O={class:"flex flex-col"},q={class:"flex","aria-label":"Breadcrumb"},Z={class:"inline-flex items-center space-x-1 md:space-x-3"},H={class:"inline-flex items-center"},J=e("svg",{class:"w-3 h-3 mr-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),K={"aria-current":"page"},Q=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),W=e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},"Commande",-1),X={"aria-current":"page"},Y={class:"flex items-center"},ee=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),te={class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},se=e("h1",{class:"mt-4 text-3xl font-bold text-black dark:text-white"},"Commandes Gestion",-1),ae={class:"lg:mx-auto lg:max-w-8xl"},oe={class:"relative overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800"},ne={class:"grid grid-cols-1 px-6 py-4 md:grid-cols-2"},re={class:"mb-2 text-lg text-gray-800 font-inter dark:text-gray-200"},le={class:"mb-2 text-lg"},de=e("span",{class:"text-gray-600 dark:text-gray-300"},"Service : ",-1),ie={class:"text-lg text-gray-800 dark:text-gray-200"},ce={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},me={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},pe={class:"text-green-600"},ue={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},_e={class:"font-bold text-green-600"},ge={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},xe={key:0,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},he={key:1,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},ve={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},fe={key:0,class:"font-bold text-green-600"},be={key:1,class:"font-bold text-yellow-200"},ye={class:"mt-4 text-base text-gray-600 dark:text-gray-300"},ke={class:"font-bold text-green-600"},we={class:"px-6 py-4 bcommande-t bcommande-gray-200"},Ce=e("p",{class:"mb-2 text-lg text-gray-800"},"Client ",-1),Ve={class:"flex items-center"},Ee={class:"ml-4"},Le={class:"text-sm text-gray-600 dark:text-gray-300"},Se={class:"text-sm text-gray-600 dark:text-gray-300"},Be={"x-data":"{open:false}",class:"px-6 py-4 bcommande-t bcommande-gray-200"},je=e("h2",{class:"mb-4 text-lg font-semibold"},"Gestion de Commande",-1),De={key:0},Te=e("h1",{class:"mb-4 text-gray-800 dark:text-gray-200"},"Vous avez deja livrer (realiser) la commande",-1),Me=e("div",{class:"mb-4"},[e("h1",{class:"text-gray-800 dark:text-gray-200"},"Le Feedback du client")],-1),Pe={class:"p-4 mb-4 bg-gray-100 rounded-lg dark:bg-gray-700"},$e={class:"text-sm text-gray-700 md:text-base dark:text-gray-300"},Fe={class:"flex items-center my-4"},Ne=e("svg",{class:"w-4 h-4 mr-1 text-yellow-500 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M10 14.155L4.284 17.84l.828-5.076L.898 7.865l5.059-.736L10 2l2.043 5.129 5.059.736-3.215 3.9.828 5.076z"})],-1),Re={class:"text-sm font-semibold text-gray-700 dark:text-gray-100"},Ue={class:"flex items-center gap-3 mb-4"},ze={class:"font-bold text-gray-800 dark:text-gray-100"},Ge={class:"flex gap-4"},Ae={key:0},Ie={class:"relative inline-flex items-center cursor-pointer"},Oe=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:bcommande-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:bcommande-gray-300 after:bcommande after:rounded-full after:h-5 after:w-5 after:transition-all dark:bcommande-gray-600 peer-checked:bg-blue-600"},null,-1),qe=e("span",{class:"ml-3 text-sm font-medium text-gray-400 dark:text-gray-500"},"Publier",-1),Ze=e("div",{class:"mb-2"},null,-1),He={key:1,class:""},Je={class:"grid gap-4 mb-4 lg:grid-cols-3"},Ke={class:"w-full"},Qe={class:"flex items-center justify-center"},We={class:"w-full p-4 bg-white rounded-lg shadow-md bcommande-t bcommande-gray-200 dark:bg-gray-800"},Xe=e("label",{class:"text-sm font-semibold",for:"progress"},"Rapport d'avancement",-1),Ye=e("button",{type:"submit",class:"self-end px-4 py-2 mb-3 text-white bg-blue-500 rounded-md"},[e("span",null,"Soumettre")],-1),et={"x-data":"{open:false}",class:"relative mb-3"},tt={class:"mb-0"},st=e("span",null,"Rapport Envoyer",-1),at={class:"p-4 mb-3 text-sm leading-normal rapport"},ot={class:"p-3 bcommande-b bcommande-gray-400"},nt={class:"mb-3 text-base text-gray-600 cursor-pointer dark:text-gray-300"},rt=e("div",{"x-collapse":"","x-show":"show",class:"p-2"},null,-1),mt=Object.assign({layout:A},{__name:"CommandeGestion",props:{commande:Object},setup(C){const p=C,g=$(),_=w({description:"",order_id:p.commande.data.id}),c=w({etat:p.commande.data.feedback.etat,progression:p.commande.data.progress,delai:p.commande.data.feedback.delai_livraison_estimee,order_id:p.commande.data.id}),x=v(!1),V=()=>{c.post(route("commande.feedback"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.add({severity:"error",summary:"Message",detail:"Feedback enviyer avec success",group:"br",life:3e3})},onError:m=>{g.add({severity:"error",summary:"Message",detail:m.message,group:"br",life:3e3})}})},E=()=>{_.post(route("commande.rapport"),{preserveScroll:!0,onSuccess:()=>{_.reset(),g.add({severity:"info",summary:"Message",detail:"Rapport envoyer",group:"br",life:3e3})},onError:m=>{m.message!=null&&g.add({severity:"error",summary:"Message",detail:m.message,group:"br",life:3e3})}})},L=v([{name:"En attente de traitement",code:"En attente de traitement"},{name:"En cours de préparation",code:"En cours de préparation"},{name:"En transit",code:"En transit"},{name:"Livré",code:"Livré"}]),S=v([{name:"10 %",code:10},{name:"30 %",code:30},{name:"50 %",code:50},{name:"70 %",code:70},{name:"90 %",code:90},{name:"100 %",code:100}]),t=F(()=>p.commande.data);return(m,a)=>{const B=r("Toast"),f=r("Link"),b=r("Photo"),y=r("Dropdown"),k=r("InputError"),j=r("Calendar"),D=r("Button"),T=r("Textarea"),M=r("Span"),P=r("Collapse");return i(),l("div",I,[n(B,{position:"bottom-right",group:"br"}),e("div",O,[e("div",null,[e("nav",q,[e("ol",Z,[e("li",H,[n(f,{href:m.route("freelance.dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:h(()=>[J,u(" Dashboard ")]),_:1},8,["href"])]),e("li",K,[n(f,{href:m.route("freelance.commandes"),class:"flex items-center"},{default:h(()=>[Q,W]),_:1},8,["href"])]),e("li",X,[e("div",Y,[ee,e("span",te,s(t.value.order_numero),1)])])])])]),se]),e("div",null,[e("div",ae,[e("div",oe,[e("div",ne,[e("p",re,"Commande #"+s(t.value.order_numero),1),e("p",le,[de,e("span",ie,s(t.value.service.title),1)]),e("p",ce,"Date de commande : "+s(t.value.created_at),1),e("p",me,[u("Date de livraison : "),e("span",pe,s(t.value.feedback.delai_livraison_estimee),1)]),e("p",ue,[u("Paiement : "),e("span",_e,s(t.value.status),1)]),e("p",ge,[u("Versement : "),t.value.is_paid!=null?(i(),l("span",xe,s(t.value.is_paid),1)):(i(),l("span",he,"en Attente"))]),e("p",ve,[u("statut : "),t.value.feedback.etat=="Livré"?(i(),l("span",fe,s(t.value.feedback.etat),1)):(i(),l("span",be,s(t.value.feedback.etat),1))]),e("p",ye,[u("Progression : "),e("span",ke,s(t.value.progress)+" %",1)])]),e("div",we,[Ce,e("div",Ve,[n(b,{user:t.value.user},null,8,["user"]),e("div",Ee,[e("p",Le,s(t.value.user.name),1),e("p",Se,s(t.value.user.email),1)])])]),e("div",Be,[je,t.value.feedback.etat=="Livré"&&t.value.progress==100?(i(),l("div",De,[Te,Me,e("div",Pe,[e("p",$e,s(t.value.feedback.commentaires?t.value.feedback.commentaires:"pas de commentaire"),1),e("div",Fe,[Ne,e("span",Re,"("+s(t.value.feedback.satisfaction?t.value.feedback.satisfaction:0)+") ",1)]),e("div",Ue,[n(b,{user:t.value.user},null,8,["user"]),e("p",ze,s(t.value.user.name),1)]),e("div",Ge,[t.value.feedback.commentaires!=null?(i(),l("div",Ae,[e("label",Ie,[e("input",{type:"checkbox",class:"sr-only peer",onChange:a[0]||(a[0]=o=>m.publier())},null,32),Oe,qe])])):N("",!0),Ze])])])):(i(),l("div",He,[e("div",Je,[e("div",null,[n(y,{modelValue:d(c).etat,"onUpdate:modelValue":a[1]||(a[1]=o=>d(c).etat=o),options:L.value,optionValue:"name",showClear:"",optionLabel:"name",placeholder:"Etat de la commande",class:"!w-full"},null,8,["modelValue","options"])]),e("div",null,[n(y,{modelValue:d(c).progression,"onUpdate:modelValue":a[2]||(a[2]=o=>d(c).progression=o),options:S.value,optionLabel:"name",optionValue:"code",placeholder:"pourcentage",showClear:"",class:"!w-full"},null,8,["modelValue","options"]),n(k,{message:d(c).errors.progression},null,8,["message"])]),e("div",Ke,[n(j,{modelValue:d(c).delai,"onUpdate:modelValue":a[3]||(a[3]=o=>d(c).delai=o),placeholder:"date de livraison",class:"w-full"},null,8,["modelValue"])])]),e("div",Qe,[n(D,{onClick:a[4]||(a[4]=o=>V()),label:"Soumettre"})])]))]),e("div",We,[e("form",{onSubmit:a[6]||(a[6]=R(o=>E(),["prevent"])),class:"flex flex-col p-3 space-y-4"},[Xe,n(T,{required:"",modelValue:d(_).description,"onUpdate:modelValue":a[5]||(a[5]=o=>d(_).description=o)},null,8,["modelValue"]),n(k,{message:d(_).errors.description},null,8,["message"]),Ye],32),e("div",null,[e("div",et,[e("h6",tt,[e("button",{onClick:a[7]||(a[7]=o=>x.value=!x.value),class:"relative flex items-center w-full p-4 text-base font-semibold text-left text-gray-600 transition-all ease-in cursor-pointer bcommande-b bcommande-solid bcommande-slate-100 dark:text-gray-500 rounded-t-1 group text-dark-500","data-collapse-target":"animated-collapse-1"},[st,e("i",{class:U([x.value?"rotate-180 transition-transform":"","absolute right-0 pt-1 text-base transition-transform fa fa-chevron-down"])},null,2)])]),n(P,{when:x.value},{default:h(()=>[e("div",at,[(i(!0),l(z,null,G(p.commande.data.rapports,o=>(i(),l("div",ot,[e("div",nt,s(o.description),1),n(M,{class:"mt-4 text-sm text-gray-500"},{default:h(()=>[u(s(o.created_at),1)]),_:2},1024),rt]))),256))])]),_:1},8,["when"])])])])])])])])}}});export{mt as default};
