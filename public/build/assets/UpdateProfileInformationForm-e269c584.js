import{T as U,d as p,c as S,w as l,o as c,e as f,a as s,b as o,h,A as v,P as _,U as B,g as u,p as g,f as k,u as t,i as y,z as E,n as z,O as A}from"./app-353d923a.js";import{_ as F}from"./ActionMessage-4f682c39.js";import{_ as O}from"./FormSection-051413cc.js";import{_ as T}from"./PrimaryButton-07b3730b.js";import{_ as V}from"./SecondaryButton-176bd723.js";import{_ as C}from"./TextInput-01c5b30b.js";import"./SectionTitle-5017f9dc.js";const q=s("h1",{class:"dark:text-gray-50"}," Profile Information",-1),D=s("span",{class:"dark:text-gray-50"}," Mettre Ã  jour les informations de profil et l'adresse e-mail de votre compte",-1),L={key:0,class:"col-span-6 sm:col-span-4"},M={class:"mt-2"},R=["src","alt"],Y=["src","alt"],G={class:"mt-2"},H={class:"col-span-6 sm:col-span-4"},J={class:"col-span-6 sm:col-span-4"},K={key:0},Q={class:"mt-2 text-sm"},W={class:"mt-2 text-sm font-medium text-green-600"},le={__name:"UpdateProfileInformationForm",props:{user:Object},setup(r){const b=r,e=U({_method:"PUT",name:b.user.name,email:b.user.email,photo:null}),P=p(null),m=p(null),n=p(null),x=()=>{n.value&&(e.photo=n.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>w()})},$=()=>{P.value=!0},I=()=>{n.value.click()},N=()=>{const a=n.value.files[0];if(!a)return;const i=new FileReader;i.onload=d=>{m.value=d.target.result},i.readAsDataURL(a)},j=()=>{A.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{m.value=null,w()}})},w=()=>{var a;(a=n.value)!=null&&a.value&&(n.value.value=null)};return(a,i)=>(c(),S(O,{onSubmitted:x},{title:l(()=>[q]),description:l(()=>[D]),form:l(()=>[a.$page.props.jetstream.managesProfilePhotos?(c(),f("div",L,[s("input",{ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:N},null,544),o(h,{for:"photo",value:"Photo"}),v(s("div",M,[r.user.profile_photo_path!=null?(c(),f("img",{key:0,src:"/storage/"+r.user.profile_photo_path,alt:r.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,R)):(c(),f("img",{key:1,src:r.user.profile_photo_url,alt:r.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,Y))],512),[[_,!m.value]]),v(s("div",G,[s("span",{class:"block w-20 h-20 bg-center bg-no-repeat bg-cover rounded-full",style:B("background-image: url('"+m.value+"');")},null,4)],512),[[_,m.value]]),o(V,{class:"mt-2 mr-2",type:"button",onClick:g(I,["prevent"])},{default:l(()=>[u(" Selectionner une Nouvelle Photo ")]),_:1},8,["onClick"]),r.user.profile_photo_path?(c(),S(V,{key:0,type:"button",class:"mt-2",onClick:g(j,["prevent"])},{default:l(()=>[u(" Effacer la Photo ")]),_:1},8,["onClick"])):k("",!0),o(y,{message:t(e).errors.photo,class:"mt-2"},null,8,["message"])])):k("",!0),s("div",H,[o(h,{for:"name",value:"Name"}),o(C,{id:"name",modelValue:t(e).name,"onUpdate:modelValue":i[0]||(i[0]=d=>t(e).name=d),type:"text",class:"block w-full mt-1",required:"",autocomplete:"name"},null,8,["modelValue"]),o(y,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",J,[o(h,{for:"email",value:"Email"}),o(C,{id:"email",modelValue:t(e).email,"onUpdate:modelValue":i[1]||(i[1]=d=>t(e).email=d),type:"email",class:"block w-full mt-1",required:"",autocomplete:"username"},null,8,["modelValue"]),o(y,{message:t(e).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&r.user.email_verified_at===null?(c(),f("div",K,[s("p",Q,[u(" Your email address is unverified. "),o(t(E),{href:a.route("verification.send"),method:"post",as:"button",class:"text-sm text-gray-600 underline rounded-md hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:g($,["prevent"])},{default:l(()=>[u(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),v(s("div",W," A new verification link has been sent to your email address. ",512),[[_,P.value]])])):k("",!0)])]),actions:l(()=>[o(F,{on:t(e).recentlySuccessful,class:"mr-3"},{default:l(()=>[u(" Saved. ")]),_:1},8,["on"]),o(T,{class:z({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:l(()=>[u(" Save ")]),_:1},8,["class","disabled"])]),_:1}))}};export{le as default};
