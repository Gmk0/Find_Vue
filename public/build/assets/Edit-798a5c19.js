import{D as J,I as R,d as I,y as h,T as U,J as Z,A as a,e as b,b as s,a as e,w as p,u as l,t as H,o as w,g as K,q as B,l as Q,F as X,j as Y,O as ee}from"./app-211ec483.js";import{_ as se}from"./FreelanceLayout-734a855f.js";import"./MainSidebarF-e3228c86.js";import"./userInfo-a5293e16.js";const te={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 md:max-w-7xl md:container px-auto bg-inherit"},oe={class:"flex flex-col"},le={class:"flex","aria-label":"Breadcrumb"},ie={class:"inline-flex items-center space-x-1 md:space-x-3"},re={class:"inline-flex items-center"},ae=e("svg",{class:"w-3 h-3 mr-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),de={"aria-current":"page"},ne=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ce=e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},"Services",-1),ue={"aria-current":"page"},me={class:"flex items-center"},pe=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ve={class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},_e=e("h1",{class:"mt-4 text-3xl font-bold text-black dark:text-white"},"Modifier",-1),ge={class:"grid grid-cols-2 gap-2"},fe={class:"w-full col-span-1 mb-4"},he={class:"col-span-1 mb-4"},be={class:"grid grid-cols-2 gap-2"},we={class:"mt-4 W-full"},xe={class:"mt-4 W-full"},ye={class:"grid grid-cols-2 gap-2"},Ve={class:"w-full col-span-1 mb-4"},Se={class:"w-full col-span-1 mb-4"},ke={class:"grid grid-cols-2 gap-2 mt-4"},Ce={class:"w-full col-span-2 mb-4"},Ie={class:"w-full col-span-2 mb-4"},Ue={class:"grid grid-cols-2 gap-2"},Be={class:"w-full col-span-1 mb-4"},Te={class:"w-full col-span-1 mb-4"},qe={class:"grid grid-cols-2 gap-2"},Me={class:"w-full col-span-1 mb-4"},Le={class:"w-full col-span-1 mb-4"},je={class:"grid grid-cols-2 gap-2"},De={class:"w-full col-span-1 mb-4"},Ee={class:"flex flex-wrap mt-4 space-x-2"},Pe={class:"relative group"},Fe=["src"],Ne={class:"absolute top-0 right-0 mt-2 mr-2"},Oe={class:"grid grid-cols-2 gap-2 mt-4"},$e={class:"w-full col-span-2 mb-4"},ze=e("p",null,"Drag and drop files to here to upload.",-1),Ze=Object.assign({layout:se},{__name:"Edit",props:{service:Object},setup(T){var x;const r=T,u=J(),v=R(),m=I(r.service.data.category_id),q=h(()=>r.service.data.files),o=U({title:r.service.data.title,tag:r.service.data.tag,basic_price:parseInt(r.service.data.basic_price),basic_revision:r.service.data.basic_revision,need_service:r.service.data.need_service,sub_category:(x=r.service.data.sub_category)==null?void 0:x.map(n=>parseInt(n)),description:r.service.data.description,category_id:r.service.data.category_id,sub_categorie:r.service.data.sub_category,video_url:r.service.data.video_url,basic_support:r.service.data.basic_support,basic_delivery_time:r.service.data.basic_delivery_time,delivery_time_unit:r.service.data.delivery_time_unit,is_publish:r.service.data.is_publish,service_id:r.service.data.id}),M=I([{name:"jour(s)",id:"jour(s)"},{name:"heure(s)",id:"heure(s)"}]),L=()=>{o.post(route("freelance.services.edition.save"),{onSuccess:()=>{u.add({severity:"info",summary:"Message",detail:"Modification reuissie",group:"br",life:1e3})},onError:n=>{u.add({severity:"error",summary:"Message",detail:n.message,group:"br",life:3e3})}})},j=h(()=>v.categoriesGet.categories),D=h(()=>v.subCategoriesGet),E=async()=>{v.fetchSubCategoriesByCategoryid(m.value)};Z(m,()=>{o.category_id=m.value,E()});const _=U({files:null,service_id:r.service.data.id}),P=()=>{},F=()=>{_.files!=null?_.post(route("addImageService"),{onFinish:()=>P(),preserveScroll:!0}):u.add({severity:"error",summary:"Message",detail:"veuillez choisir une photo",group:"br",life:1e3})},N=n=>{_.files=n.files},O=n=>{ee.post(route("removeFileService"),{file_index:n,service_id:r.service.data.id},{preserveScroll:!0,onSuccess:()=>{u.add({severity:"info",summary:"Message",detail:"Photo supprimer",group:"br",life:1e3})},onError:t=>{u.add({severity:"error",summary:"Message",detail:t.message,group:"br",life:1e3})}})};return(n,t)=>{const $=a("Toast"),d=a("InputLabel"),y=a("InputText"),V=a("Chips"),S=a("Dropdown"),c=a("InputError"),z=a("MultiSelect"),g=a("InputNumber"),k=a("Editor"),A=a("InputSwitch"),f=a("Button"),C=a("Panel"),G=a("FileUpload");return w(),b("div",te,[s($,{position:"bottom-right",group:"br"}),e("div",oe,[e("div",null,[e("nav",le,[e("ol",ie,[e("li",re,[s(l(B),{href:n.route("freelance.dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:p(()=>[ae,K(" Dashboard ")]),_:1},8,["href"])]),e("li",de,[s(l(B),{href:n.route("freelance.services"),class:"flex items-center"},{default:p(()=>[ne,ce]),_:1},8,["href"])]),e("li",ue,[e("div",me,[pe,e("span",ve,H(r.service.data.service_numero),1)])])])])]),_e]),e("div",null,[s(C,{header:"Service information",toggleable:"",class:"mt-8"},{default:p(()=>[e("form",{onSubmit:t[13]||(t[13]=Q(i=>L(),["prevent"])),class:"grid grid-cols-1 gap-4 p-4 border rounded-md dark:border-gray-300 min-h-72"},[e("div",ge,[e("div",fe,[s(d,{for:"titre",value:"titre"}),s(y,{required:"",modelValue:l(o).title,"onUpdate:modelValue":t[0]||(t[0]=i=>l(o).title=i),class:"w-full",id:"titre"},null,8,["modelValue"])]),e("div",he,[s(d,{for:"titre",value:"Tags de recherche"}),s(V,{modelValue:l(o).tag,"onUpdate:modelValue":t[1]||(t[1]=i=>l(o).tag=i),placeholder:"Tags pour facileter la recherche",class:"w-full",id:"tag"},null,8,["modelValue"])])]),e("div",be,[e("div",we,[s(S,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=i=>m.value=i),optionValue:"id",required:"",options:j.value,showClear:"",optionLabel:"name",placeholder:"Categories",class:"!w-full"},null,8,["modelValue","options"]),s(c,{class:"mt-2",message:l(o).errors.category_id},null,8,["message"])]),e("div",xe,[s(z,{modelValue:l(o).sub_category,"onUpdate:modelValue":t[3]||(t[3]=i=>l(o).sub_category=i),optionValue:"id",options:D.value,showClear:"",optionLabel:"name",placeholder:"Sous categorie",class:"!w-full"},null,8,["modelValue","options"]),s(c,{class:"mt-2",message:l(o).errors.sub_category},null,8,["message"])])]),e("div",ye,[e("div",Ve,[s(d,{for:"titre",value:"Prix"}),s(g,{showButtons:"",modelValue:l(o).basic_price,"onUpdate:modelValue":t[4]||(t[4]=i=>l(o).basic_price=i),placeholder:"Prix du service",class:"w-full",inputId:"Prix"},null,8,["modelValue"]),s(c,{class:"mt-2",message:l(o).errors.basic_price},null,8,["message"])]),e("div",Se,[s(d,{for:"revision",value:"Revision"}),s(g,{showButtons:"",modelValue:l(o).basic_revision,"onUpdate:modelValue":t[5]||(t[5]=i=>l(o).basic_revision=i),class:"w-full",placeholder:"nombre de revision pour ce prix",id:"titre"},null,8,["modelValue"]),s(c,{class:"mt-2",message:l(o).errors.basic_revision},null,8,["message"])])]),e("div",ke,[e("div",Ce,[s(d,{for:"description",value:"Description"}),s(k,{required:"",formats:null,modelValue:l(o).description,"onUpdate:modelValue":t[6]||(t[6]=i=>l(o).description=i),class:"mt-2",placeholder:"une Description pour ce service",editorStyle:"height: 250px"},null,8,["modelValue"]),s(c,{class:"mt-2",message:l(o).errors.description},null,8,["message"])]),e("div",Ie,[s(d,{for:"titre",value:"Besoin"}),s(k,{required:"",modelValue:l(o).need_service,"onUpdate:modelValue":t[7]||(t[7]=i=>l(o).need_service=i),class:"mt-2",ceholder:"vous besoin de quoi pour la realisation de ce service",editorStyle:"height: 250px"},null,8,["modelValue"]),s(c,{class:"mt-2",message:l(o).errors.need_service},null,8,["message"])])]),e("div",Ue,[e("div",Be,[s(d,{for:"support",value:"support"}),s(V,{required:"",modelValue:l(o).basic_support,"onUpdate:modelValue":t[8]||(t[8]=i=>l(o).basic_support=i),placeholder:"Le support du service",class:"w-full mt-2",id:"support"},null,8,["modelValue"]),s(c,{class:"mt-2",message:l(o).errors.basic_support},null,8,["message"])]),e("div",Te,[s(d,{for:"titre",value:"titre"}),s(y,{modelValue:l(o).video_url,"onUpdate:modelValue":t[9]||(t[9]=i=>l(o).video_url=i),placeholder:"lien d'une video du  service",class:"w-full mt-2",id:"titre"},null,8,["modelValue"])])]),e("div",qe,[e("div",Me,[s(d,{for:"temps",value:"Temps"}),s(g,{required:"",modelValue:l(o).basic_delivery_time,"onUpdate:modelValue":t[10]||(t[10]=i=>l(o).basic_delivery_time=i),showButtons:"",placeholder:"Temps de livraison",class:"w-full mt-2",id:"titre"},null,8,["modelValue"])]),e("div",Le,[s(d,{for:"titre",value:"titre"}),s(S,{required:"",modelValue:l(o).delivery_time_unit,"onUpdate:modelValue":t[11]||(t[11]=i=>l(o).delivery_time_unit=i),optionValue:"id",options:M.value,showClear:"",optionLabel:"name",placeholder:"Unite de temps en heures ou jours",class:"!w-full mt-2"},null,8,["modelValue","options"])])]),e("div",je,[e("div",De,[s(d,{for:"titre",value:"Publier"}),s(A,{class:"mt-2",required:"",modelValue:l(o).is_publish,"onUpdate:modelValue":t[12]||(t[12]=i=>l(o).is_publish=i),id:"titre"},null,8,["modelValue"])])]),e("div",null,[s(f,{type:"submit",label:"Soumettre"})])],32)]),_:1}),s(C,{header:"Image",toggleable:"",class:"mt-8"},{default:p(()=>[e("div",null,[e("div",Ee,[(w(!0),b(X,null,Y(q.value,(i,W)=>(w(),b("div",null,[e("div",Pe,[e("img",{src:"/storage/"+i,alt:"Product Name",class:"w-16 h-full border rounded-md cursor-pointer lg:w-24 2xl:w-24 hover:opacity-80"},null,8,Fe),e("div",Ne,[s(f,{onClick:Ae=>O(W),size:"small",outlined:"",icon:"pi pi-trash"},null,8,["onClick"])])])]))),256))])]),e("div",Oe,[e("div",$e,[s(d,{for:"titre",class:"mb-4",value:"Image"}),s(G,{showCancelButton:!1,auto:!0,class:"",fileLimit:3,onSelect:N,onUpload:t[14]||(t[14]=i=>n.onAdvancedUpload(i)),multiple:!0,accept:"image/*",maxFileSize:1e6},{empty:p(()=>[ze]),_:1})])]),e("div",null,[s(f,{onClick:t[15]||(t[15]=i=>F()),label:"Changer"})])]),_:1})])])}}});export{Ze as default};
