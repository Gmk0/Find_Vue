import{z as Z,o as s,e as o,a as e,r as X,n as v,u as _,m as ee,d as w,K as te,y as W,T as se,Q as oe,A as y,b as h,f as u,t as x,F as m,j as T,C as ae,H as ne,c as re,w as S,P as H,s as le,v as ie}from"./app-211ec483.js";/* empty css                                                          */const ce={class:""},St={__name:"ChatLayout",setup(k){const l=Z();function j(){window.innerWidth<768&&l.ToogleFalse()}return j(),(p,b)=>(s(),o("div",{class:v(["overflow-hidden has-min-sidebar",{"is-sidebar-open":_(l).SidebarExpanded}])},[e("main",ce,[X(p.$slots,"default")])],2))}};const r=k=>(le("data-v-76083768"),k=k(),ie(),k),de={class:"chat-header h-[61px] border-b border-slate-150 dark:border-navy-700 relative z-10 flex w-full shrink-0 items-center justify-between bg-white px-[calc(var(--margin-x)-.5rem)] shadow-sm transition-[padding,width] duration-[.25s] dark:bg-navy-800"},ue={class:"flex items-center space-x-5"},ve={class:"ml-1 h-7 w-7"},he=r(()=>e("span",null,null,-1)),pe=r(()=>e("span",null,null,-1)),ge=r(()=>e("span",null,null,-1)),fe=[he,pe,ge],xe={key:0,class:"avatar"},be={class:"font-medium text-slate-700 line-clamp-1 dark:text-navy-100","x-text":"activeChat.name"},me={key:0,class:"mt-0.5 text-xs"},_e={key:1,class:"mt-0.5 text-xs"},ke={class:"flex px-4 -mr-1 gap-4items-center"},we=r(()=>e("button",{class:"w-6 h-6 p-0 rounded-full btn2 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ye=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.25 21.167h5.5c4.584 0 6.417-1.834 6.417-6.417v-5.5c0-4.583-1.834-6.417-6.417-6.417h-5.5c-4.583 0-6.417 1.834-6.417 6.417v5.5c0 4.583 1.834 6.417 6.417 6.417ZM13.834 2.833v18.334"})],-1)),Ce=[ye],Me={key:0,"x-transition:enter":"transition-all duration-500 easy-in-out","x-transition:enter-start":"opacity-0 [transform:translate3d(0,1rem,0)]","x-transition:enter-end":"opacity-100 [transform:translate3d(0,0,0)]",class:"space-y-5"},Se={class:"flex items-center mx-4 space-x-3"},je=r(()=>e("div",{class:"flex-1 h-px bg-slate-200 dark:bg-navy-500"},null,-1)),Be=r(()=>e("div",{class:"flex-1 h-px bg-slate-200 dark:bg-navy-500"},null,-1)),$e={class:"flex flex-col items-start space-y-3.5"},Fe={key:1},Te={key:0,class:"relative group"},ze=["src"],Ie={class:"absolute top-0 flex items-center justify-center w-full h-full transition-all duration-300 rounded-lg opacity-0 bg-black/30 group-hover:opacity-100"},Ve=["href"],De=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),He=[De],Ee=["href"],Le={class:"chat-footer relative flex h-16 w-full shrink-0 items-center justify-between border-t border-slate-150 bg-white px-[calc(var(--margin-x)-.25rem)] transition-[padding,width] duration-[.25s] dark:border-navy-600 dark:bg-navy-800"},Ae={class:"-ml-1.5 flex flex-1 space-x-2"},Ue=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),qe=[Ue],Ne={class:"-mr-1.5 flex"},Pe=r(()=>e("button",{class:"w-6 h-6 p-0 rounded-full btn22 shrink-0 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Re=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5.5 w-5.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.813 5.146 9.027 3.99c4.05 1.79 4.05 4.718 0 6.508l-9.027 3.99c-6.074 2.686-8.553.485-5.515-4.876l.917-1.613c.232-.41.232-1.09 0-1.5l-.917-1.623C1.26 4.66 3.749 2.46 9.813 5.146ZM6.094 12.389h7.341"})],-1)),We=[Re],Ze={class:"fixed sidebar-user right-0 top-0 z-[101] h-full w-full sm:w-80"},Ke={class:"flex flex-col w-full h-full transition-transform duration-200 bg-white border-l border-slate-150 dark:border-navy-600 dark:bg-navy-750"},Oe={class:"flex h-[60px] items-center justify-between p-4"},Qe=r(()=>e("h3",{class:"text-base font-medium text-slate-700 dark:text-navy-100"}," Chat Info ",-1)),Ye={class:"-mr-1.5 flex space-x-1"},Ge=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)),Je=[Ge],Xe={class:"flex flex-col items-center mt-5"},et={key:0,class:"w-20 h-20 avatar"},tt=["textContent"],st=r(()=>e("p",null,"Frontend Developer",-1)),ot=r(()=>e("div",{class:"mt-2 flex space-x-1.5"},[e("button",{class:"w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])]),e("button",{class:"w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])]),e("button",{class:"w-10 h-10 p-0 rounded-full btn2 text-slate-600 hover:bg-slate-300/20 hover:text-primary focus:bg-slate-300/20 focus:text-primary active:bg-slate-300/25 dark:text-navy-100 dark:hover:bg-navy-300/20 dark:hover:text-accent dark:focus:bg-navy-300/20 dark:focus:text-accent dark:active:bg-navy-300/25"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])])],-1)),at={class:"flex flex-col mt-6"},nt={class:"px-4 overflow-x-auto is-scrollbar-hidden"},rt={class:"flex tabs-list"},lt={class:"px-4 pt-4 tab-content"},it={key:0},ct={class:"grid grid-cols-4 gap-2"},dt={key:0},ut=["src","alt"],vt={key:1},ht={class:"flex flex-col space-y-3.5"},pt={key:0},gt=["href"],ft=r(()=>e("div",{class:"flex items-center justify-center text-white mask is-squircle h-11 w-11 bg-warning"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),xt={class:"block max-w-md"},bt={class:"block font-medium break-before-auto text-slate-700 dark:text-navy-100"},mt={class:"card"},_t=r(()=>e("p",null,"Tirez et déposez des fichiers ici pour les télécharger.",-1)),kt={class:"mt-1"},wt={class:"flex justify-end gap-4 mt-4"},yt={__name:"BodyMessage",props:{messages:Array,user:Object,chatId:String},setup(k){var q;const l=k,j=Z(),p=w(!0),b=w("tabImages"),K=te(),g=W(()=>l.user),B=w(!1),f=se({message:"",chat:l.chatId,user:(q=l.user)==null?void 0:q.id,files:null}),E=()=>{f.post(route("chat.Send"),{preserveScroll:!0,onSuccess:()=>z()}),z(),A(),f.reset("message")},L=W(()=>{if(!l.messages)return null;const a={};return l.messages.forEach(t=>{const d=Q(t.created_at);a[d]||(a[d]=[]),a[d].push(t)}),a}),O=a=>{f.files=a.files},A=()=>{B.value=!1,f.reset("files","message")},Q=a=>{const t=new Date(a);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`};w(0);const $=w(null);w([]),oe(()=>{Y()}),window.Echo.private(`chat.${K.props.auth.user.id}`).listen("MessageSent",a=>{z()});const Y=()=>{const a=$.value,t=a.scrollHeight,d=500,C=performance.now(),F=V=>{const M=V-C,D=M/d;a.scrollTop=Math.min(D*t,t),M<d&&window.requestAnimationFrame(F)};window.requestAnimationFrame(F)},z=()=>{const a=$.value;a.scrollTop=a.scrollHeight},G=()=>{$.value.scrollTop},I=a=>{let t=["jpg","jpeg","png","gif","bmp"],d=a.split(".").pop().toLowerCase();return t.includes(d)},U=a=>a.split("/").pop(),J=a=>{const t=new Date(a),d=t.getHours().toString().padStart(2,"0"),C=t.getMinutes().toString().padStart(2,"0");return`${d}:${C}`};return(a,t)=>{var N,P,R;const d=y("Photo"),C=y("Toast"),F=y("FileUpload"),V=y("Textarea"),M=y("Button"),D=y("Dialog");return s(),o("main",{class:v(["flex flex-col w-full mt-0 main-content h-100vh chat-app",p.value&&"lg:mr-80"])},[e("div",de,[e("div",ue,[e("div",ve,[e("button",{class:v(["menu-toggle ml-0.5 flex h-7 w-7 flex-col justify-center space-y-1.5 text-primary outline-none focus:outline-none dark:text-accent-light/80",_(j).isSidebarExpanded&&"active"]),onClick:t[0]||(t[0]=n=>_(j).toogleRight())},fe,2)]),e("div",{onClick:t[1]||(t[1]=n=>p.value=!0),class:"flex items-center space-x-4 cursor-pointer font-inter"},[g.value!=null?(s(),o("div",xe,[h(d,{user:g.value},null,8,["user"])])):u("",!0),e("div",null,[e("p",be,x((N=g.value)==null?void 0:N.name),1),(P=g.value)!=null&&P.is_online?(s(),o("p",me,"En ligne ")):(s(),o("p",_e,x((R=g.value)==null?void 0:R.last_activity),1))])])]),e("div",ke,[we,e("button",{onClick:t[2]||(t[2]=n=>p.value=!p.value),class:v([p.value?"text-primary dark:text-accent-light":"text-slate-500 dark:text-navy-200","p-0 rounded-full btn2 h-7 w-7 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"])},Ce,2)])]),e("div",{class:"grow overflow-y-auto scrollbar-sm px-[calc(var(--margin-x)-.5rem)] py-5 transition-all duration-[.25s]",ref_key:"scrollContainer",ref:$,onScroll:G},[L.value?(s(),o("div",Me,[(s(!0),o(m,null,T(L.value,(n,c)=>(s(),o(m,{key:c},[e("div",Se,[je,e("p",null,x(c),1),Be]),(s(!0),o(m,null,T(n,i=>(s(),o("div",{key:i},[e("div",{class:v([i.receiver_id==l.user.id?"justify-end ":"items-start","flex space-x-2.5 sm:space-x-5"])},[e("div",{class:v([i.receiver_id==l.user.id?"hidden":"flex","avatar"])},[h(d,{user:g.value},null,8,["user"])],2),e("div",$e,[e("div",{class:v([i.receiver_id==l.user.id?"ml-4 md:ml-10 ":"mr-4 sm:mr-10","max-w-lg"])},[i.body!=null?(s(),o("div",{key:0,class:v([i.receiver_id==l.user.id?"rounded-br-none dark:text-white bg-info/10 text-slate-700 dark:bg-accent":" bg-white text-slate-700 dark:text-navy-100 dark:bg-navy-700 rounded-tl-none ","p-3 shadow-sm rounded-2xl"])},x(i.body),3)):u("",!0),i.file!=null?(s(),o("div",Fe,[I(i.file[0])?(s(),o("div",Te,[e("img",{class:"object-cover rounded-lg h-44",src:"/storage/"+i.file[0],alt:"image"},null,8,ze),e("div",Ie,[e("a",{href:"/storage/"+i.file[0],target:"_blank",class:"p-0 font-medium text-white rounded-full btn2 h-9 w-9 bg-info hover:bg-info-focus focus:bg-info-focus active:bg-info-focus/90"},He,8,Ve)])])):(s(),o("a",{key:1,href:"/storage/"+i.file[0],target:"_blank",class:v([i.receiver_id==l.user.id?"rounded-br-none dark:text-white bg-info/10 text-slate-700 dark:bg-accent":" bg-white text-slate-700 dark:text-navy-100 dark:bg-navy-700 rounded-tl-none ","p-3 mb-4 shadow-sm rounded-2xl"])},x(U(i.file[0])),11,Ee))])):u("",!0),e("p",{class:v([i.receiver_id==l.user.id?" text-left":"text-right","mt-2 ml-auto text-xs text-right text-slate-400 dark:text-navy-300"])},x(J(i.created_at)),3)],2)])],2)]))),128))],64))),128))])):u("",!0)],544),e("div",Le,[e("div",Ae,[e("button",{onClick:t[3]||(t[3]=n=>B.value=!0),class:"w-6 h-6 p-0 rounded-full btn22 shrink-0 text-slate-500 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:text-navy-200 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},qe),ae(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>_(f).message=n),class:"w-full h-10 bg-transparent border-none focus:ring-0 placeholder:text-slate-400/70",placeholder:"Write the message"},null,512),[[ne,_(f).message]])]),e("div",Ne,[Pe,e("button",{onClick:t[5]||(t[5]=n=>E()),class:"w-6 h-6 p-0 rounded-full btn22 shrink-0 text-primary hover:bg-primary/20 focus:bg-primary/20 active:bg-primary/25 dark:text-accent-light dark:hover:bg-accent-light/20 dark:focus:bg-accent-light/20 dark:active:bg-accent-light/25"},We)])]),p.value?(s(),re(H,{key:0,name:"parent"},{default:S(()=>{var n;return[e("div",Ze,[e("div",Ke,[e("div",Oe,[Qe,e("div",Ye,[e("button",{onClick:t[6]||(t[6]=c=>p.value=!1),class:"w-8 h-8 p-0 rounded-full btn2 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"},Je)])]),e("div",Xe,[g.value?(s(),o("div",et,[h(d,{user:g.value,taille:"'20'"},null,8,["user"])])):u("",!0),e("h3",{textContent:x((n=g.value)==null?void 0:n.name),class:"mt-2 text-lg font-medium text-slate-700 dark:text-navy-100"},null,8,tt),st,ot]),e("div",at,[e("div",nt,[e("div",rt,[e("button",{onClick:t[7]||(t[7]=c=>b.value="tabImages"),class:v([b.value==="tabImages"?"border-primary dark:border-accent text-primary dark:text-accent-light":"border-transparent hover:text-slate-800 focus:text-slate-800 dark:hover:text-navy-100 dark:focus:text-navy-100","px-3 py-2 font-medium border-b-2 rounded-none btn2 shrink-0"])}," Images ",2),e("button",{onClick:t[8]||(t[8]=c=>b.value="tabFiles"),class:v([b.value==="tabFiles"?"border-primary dark:border-accent text-primary dark:text-accent-light":"border-transparent hover:text-slate-800 focus:text-slate-800 dark:hover:text-navy-100 dark:focus:text-navy-100","px-3 py-2 font-medium border-b-2 rounded-none btn2 shrink-0"])}," Files ",2)])]),e("div",lt,[b.value==="tabImages"?(s(),o("div",it,[h(H,{name:"image",mode:"out-in"},{default:S(()=>[e("div",ct,[(s(!0),o(m,null,T(l.messages,c=>(s(),o(m,null,[c.file!=null?(s(),o("div",dt,[I(c.file[0])?(s(),o("img",{key:0,class:"object-cover object-center rounded-lg aspect-square",src:"/storage/"+c.file[0],alt:c.file[0]},null,8,ut)):u("",!0)])):u("",!0)],64))),256))])]),_:1})])):u("",!0),b.value==="tabFiles"?(s(),o("div",vt,[h(H,{name:"image",mode:"out-in"},{default:S(()=>[e("div",ht,[(s(!0),o(m,null,T(l.messages,c=>(s(),o(m,null,[c.file!=null?(s(),o("div",pt,[I(c.file[0])?u("",!0):(s(),o("a",{key:0,href:"/storage/"+c.file[0],target:"_blank",class:"flex items-center space-x-3 cursor-pointer"},[ft,e("div",xt,[e("p",bt,x(U(c.file[0])),1)])],8,gt))])):u("",!0)],64))),256))])]),_:1})])):u("",!0)])])])])]}),_:1})):u("",!0),h(D,{visible:B.value,"onUpdate:visible":t[12]||(t[12]=n=>B.value=n),position:"'bottom'",modal:"",header:"Fichier",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:S(()=>[e("div",null,[e("div",mt,[h(C),h(F,{name:"demo[]",auto:!0,onSelect:O,multiple:!0,maxFileSize:5e6},{empty:S(()=>[_t]),_:1})]),e("div",kt,[h(V,{rows:"1",modelValue:_(f).message,"onUpdate:modelValue":t[9]||(t[9]=n=>_(f).message=n),cols:"1",placeholder:"Rajouter un message",class:"w-full"},null,8,["modelValue"])]),e("div",wt,[h(M,{label:"Envoyer",onClick:t[10]||(t[10]=n=>E())}),h(M,{severity:"'danger'",onClick:t[11]||(t[11]=n=>A()),label:"Annuler"})])])]),_:1},8,["visible"])],2)}}},jt=ee(yt,[["__scopeId","data-v-76083768"]]);export{jt as B,St as _};
