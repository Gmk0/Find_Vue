import{T as U,d as _,m as j,c as w,w as r,o as u,e as f,a as t,b as s,h as z,G as g,L as y,S as E,g as c,p as b,f as k,u as o,i as h,z as B,n as q,O as M}from"./app-5460a236.js";import{_ as T}from"./ActionMessage-2a496cfd.js";import{_ as F}from"./FormSection-e515b99f.js";import{_ as L}from"./PrimaryButton-429c793e.js";import{_ as S}from"./SecondaryButton-fd5c61ac.js";import"./SectionTitle-bab05d43.js";const O=t("h1",{class:"dark:text-gray-50"}," Profile Information",-1),D=t("span",{class:"dark:text-gray-50"}," Mettre à jour les informations de profil et l'adresse e-mail de votre compte",-1),R={key:0,class:"col-span-6 sm:col-span-4"},A={class:"mt-2"},G=["src","alt"],H=["src","alt"],J={class:"mt-2"},K={class:"col-span-6 sm:col-span-4"},Q={class:"col-span-6 sm:col-span-4"},W={key:0},X={class:"mt-2 text-sm"},Y={class:"mt-2 text-sm font-medium text-green-600"},Z={class:"col-span-6 sm:col-span-4"},re={__name:"UpdateProfileInformationForm",props:{user:Object},setup(n){const v=n,e=U({_method:"PUT",name:v.user.name,email:v.user.email,phone:v.user.phone,photo:null}),P=_(null),m=_(null),i=_(null),x=()=>{i.value&&(e.photo=i.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},C=()=>{P.value=!0},I=()=>{i.value.click()},$=()=>{const a=i.value.files[0];if(!a)return;const l=new FileReader;l.onload=d=>{m.value=d.target.result},l.readAsDataURL(a)},N=()=>{M.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{m.value=null,V()}})},V=()=>{var a;(a=i.value)!=null&&a.value&&(i.value.value=null)};return(a,l)=>{const d=j("MazInput");return u(),w(F,{onSubmitted:x},{title:r(()=>[O]),description:r(()=>[D]),form:r(()=>[a.$page.props.jetstream.managesProfilePhotos?(u(),f("div",R,[t("input",{ref_key:"photoInput",ref:i,type:"file",class:"hidden",onChange:$},null,544),s(z,{for:"photo",value:"Photo"}),g(t("div",A,[n.user.profile_photo_path!=null?(u(),f("img",{key:0,src:"/storage/"+n.user.profile_photo_path,alt:n.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,G)):(u(),f("img",{key:1,src:n.user.profile_photo_url,alt:n.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,H))],512),[[y,!m.value]]),g(t("div",J,[t("span",{class:"block w-20 h-20 bg-center bg-no-repeat bg-cover rounded-full",style:E("background-image: url('"+m.value+"');")},null,4)],512),[[y,m.value]]),s(S,{class:"mt-2 mr-2",type:"button",onClick:b(I,["prevent"])},{default:r(()=>[c(" Selectionner une Nouvelle Photo ")]),_:1}),n.user.profile_photo_path?(u(),w(S,{key:0,type:"button",class:"mt-2",onClick:b(N,["prevent"])},{default:r(()=>[c(" Effacer la Photo ")]),_:1})):k("",!0),s(h,{message:o(e).errors.photo,class:"mt-2"},null,8,["message"])])):k("",!0),t("div",K,[s(d,{modelValue:o(e).name,"onUpdate:modelValue":l[0]||(l[0]=p=>o(e).name=p),type:"text",required:"",label:"Nom d'utilisateur"},null,8,["modelValue"]),s(h,{message:o(e).errors.name,class:"mt-2"},null,8,["message"])]),t("div",Q,[s(d,{modelValue:o(e).email,"onUpdate:modelValue":l[1]||(l[1]=p=>o(e).email=p),type:"email",label:"email",required:"",autocomplete:"username"},null,8,["modelValue"]),s(h,{message:o(e).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&n.user.email_verified_at===null?(u(),f("div",W,[t("p",X,[c(" Votre addresse email n'est pas verifié. "),s(o(B),{href:a.route("verification.send"),method:"post",as:"button",class:"text-sm text-gray-600 underline rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b(C,["prevent"])},{default:r(()=>[c(" Cliquez ici pour renvoyer l'adresse mail. ")]),_:1},8,["href"])]),g(t("div",Y," Un nouveau lien a ete envoyer dans votre adresse mail. ",512),[[y,P.value]])])):k("",!0)]),t("div",Z,[s(d,{modelValue:o(e).phone,"onUpdate:modelValue":l[2]||(l[2]=p=>o(e).phone=p),type:"text",required:"",label:"Telephone"},null,8,["modelValue"]),s(h,{message:o(e).errors.phone,class:"mt-2"},null,8,["message"])])]),actions:r(()=>[s(T,{on:o(e).recentlySuccessful,class:"mr-3"},{default:r(()=>[c(" Enregistré. ")]),_:1},8,["on"]),s(L,{class:q({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:r(()=>[c(" Enregistrer ")]),_:1},8,["class","disabled"])]),_:1})}}};export{re as default};
