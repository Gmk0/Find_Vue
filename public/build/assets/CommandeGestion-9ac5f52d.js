import{_ as T}from"./UserLayout-f039d0a7.js";import{d as b,E as U,T as y,m as v,e as s,a as e,b as o,w as m,u as p,t as d,g as l,n as j,f as k,o as a,z as w,ak as M,F as O,j as S}from"./app-734f03f5.js";import"./MainSidebarUser-5450bf0f.js";/* empty css                                                          */import"./userInfo-23b80749.js";const R={class:"flex flex-col min-h-screen gap-6 px-4 lg:mx-auto md:p-6 lg:max-w-7xl md:container px-auto bg-inherit"},G={class:"flex flex-col"},Z={class:"flex","aria-label":"Breadcrumb"},H={class:"inline-flex items-center space-x-1 md:space-x-3"},I={class:"inline-flex items-center"},J=e("svg",{class:"w-3 h-3 mr-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),K={"aria-current":"page"},Q=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),W=e("span",{class:"ml-1 text-sm font-medium text-gray-700 md:ml-2 dark:text-gray-400"},"Commande",-1),X={"aria-current":"page"},Y={class:"flex items-center"},ee=e("svg",{class:"w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),te={class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},se=e("h1",{class:"mt-4 text-3xl font-bold text-black dark:text-white"},"Commandes",-1),ae={class:""},oe={class:"overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800"},ne={class:"grid grid-cols-1 px-6 py-4 lg:grid-cols-2"},le={class:"mb-4 font-sans text-lg text-gray-800 dark:text-gray-300"},re={class:"font-bold font-inter"},de={class:"mb-4 text-lg text-gray-800 md:mb-2 dark:text-gray-300"},ie={class:"mb-4 text-base text-gray-600 dark:text-gray-400 md:mb-2"},ce={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},ue={class:"text-green-500"},_e={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},me={key:0,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},pe={key:1,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},xe={key:2,class:"bg-red-500 px-1.5 py-0.5 rounded-lg"},ve={class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},ge={key:0,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},he={key:1,class:"text-red-300 px-1.5 py-0.5 rounded-lg"},be={key:0,class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},fe={key:0,class:"text-blue-300 px-1.5 py-0.5 rounded-lg"},ye={key:1,class:"text-green-500 px-1.5 py-0.5 rounded-lg"},ke={key:2,class:"text-red-200 px-1.5 py-0.5 rounded-lg"},we={key:3,class:"bg-red-500 px-1.5 py-0.5 rounded-lg"},Ce={key:1,class:"mb-4 text-base text-gray-600 md:mb-2 dark:text-gray-300"},Ee=e("span",null,"Pas d'etat disponible",-1),Be={class:"px-6 py-4 border-t border-gray-200"},Pe=e("p",{class:"mb-2 text-lg text-gray-800"},"Avancement",-1),Fe={class:"flex items-center"},je={class:"flex-1"},Le={class:"ml-2 text-sm text-gray-600 dark:text-gray-300"},Ve={class:"px-6 py-4 border-t border-gray-300"},ze=e("h1",{class:"flex items-start gap-2 text-lg font-bold cursor-pointer lg:text-xl"}," Freelance lié ",-1),De={class:"flex items-center mt-4"},$e={class:"ml-4"},Ne={href:"",class:"text-sm text-gray-600 dark:text-gray-300"},qe={class:"px-6 py-4 border-t border-gray-200"},Ae=e("path",{d:"M14.707 7.293a1 1 0 0 0-1.414 0L10 10.586 6.707 7.293a1 1 0 0 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 0-1.414z"},null,-1),Te=[Ae],Ue={key:0},Me={class:"mb-3 border-b border-gray-50"},Oe={class:"text-base text-gray-600 dark:text-gray-300"},Se={class:"mt-4 text-sm text-gray-500"};const Re={class:"px-6 py-4 border-t border-gray-200"},Ge=e("p",{class:"mb-2 text-lg text-gray-800"},"Options supplémentaires",-1),Ze={class:"grid grid-cols-2 gap-2 lg:grid-cols-5 md:grid-cols-4 lg:flex-row"},He={key:0},Ie=e("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Contact",-1),Je=[Ie],Ke={class:"w-full"},Qe={key:1,class:"w-full"},We={key:2,class:"w-full"},Xe=e("div",{class:"hidden"},[e("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Payer")],-1),Ye={class:"hidden"},et={class:"px-6 py-4 border-t border-gray-200"},tt={class:"flex items-start gap-2 text-xl font-bold cursor-pointer"},st=e("path",{d:"M14.707 7.293a1 1 0 0 0-1.414 0L10 10.586 6.707 7.293a1 1 0 0 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 0-1.414z"},null,-1),at=[st],ot={key:0,class:"pt-4"},nt={class:"text-base text-gray-600 dark:text-gray-300"},lt={class:"text-lg font-bold"},rt={class:"text-base text-gray-600 dark:text-gray-300"},dt={class:"flex gap-4"},it={class:""},ct={class:"text-base text-gray-600 dark:text-gray-300"},ut={class:"p-2 text-xl font-extrabold text-green-400 rounded"},_t={class:"p-2"},mt=e("span",null,[e("i",{class:"pi pi-eye"})],-1),pt={key:1},xt=e("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Numéro de transaction : Pas de transaction en cours",-1),vt=[xt],gt={class:"flex flex-col w-full mt-8"},ht={class:"flex gap-4 mt-4"},bt={class:"flex flex-col w-full mt-4"},ft=e("div",null,[e("div",null,[e("div",{class:"flex items-center justify-center mb-2 text-lg text-gray-800 dark:text-gray-100"},"Confirmez la réception de votre commande"),e("div",{class:"px-4 mt-4 text-lg text-gray-700 dark:text-gray-50"}," En confirmant la réception, vous attestez que la commande a été réalisée à votre satisfaction. Cela permettra au freelance de recevoir son paiement. Êtes-vous prêt à procéder? ")])],-1),yt={class:"flex items-center justify-center gap-4 mt-4"},Pt=Object.assign({layout:T},{__name:"CommandeGestion",props:{commande:Object},setup(L){const i=L,g=b(!1),t=U(()=>i.commande.data),h=b(!1),x=b(!1),f=y({description:i.commande.data.feedback.commentaires,rating:i.commande.data.feedback.satisfactions,feedback_id:i.commande.data.feedback.id}),V=y({order_id:i.commande.data.id}),z=y({freelance_user_id:i.commande.data.freelance_user.id,freelance_id:i.commande.data.freelance.id,message:"",order:i.commande.data.id}),D=()=>{z.post(route("user.paiements.contacterUser"))},c=b(!1),$=()=>{f.post(route("user.commandes.sendFeeback"),{preserveScroll:!0,onFinish:()=>{c.value=!1},onError:u=>{alert(u.message)}})},N=()=>{V.post(route("user.paiements.debloquerPaiement"),{onSuccess:()=>{x.value=!1,alert("tres bien")},onError:u=>{alert(u.message)}})};return(u,n)=>{var B,P,F;const q=v("Photo"),C=v("Collapse"),_=v("Button"),A=v("Textarea"),E=v("Dialog");return a(),s("div",R,[e("div",G,[e("div",null,[e("nav",Z,[e("ol",H,[e("li",I,[o(p(w),{href:u.route("user.dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:m(()=>[J,l(" Dashboard ")]),_:1},8,["href"])]),e("li",K,[o(p(w),{href:u.route("user.commandes"),class:"flex items-center"},{default:m(()=>[Q,W]),_:1},8,["href"])]),e("li",X,[e("div",Y,[ee,e("span",te,d(t.value.order_numero),1)])])])])]),se]),e("div",ae,[e("div",oe,[e("div",ne,[e("p",le,[l("Commande "),e("span",re,d(t.value.order_numero),1)]),e("p",de,[l("Service : "),e("span",null,d(t.value.service.title),1)]),e("p",ie,[l("Date de commande : "),e("span",null,d(t.value.created_at),1)]),e("p",ce,[l("Date de livraison : "),e("span",ue,d((B=t.value.feedback)==null?void 0:B.delai_livraison_estimee),1)]),e("p",_e,[l("Paiement : "),t.value.status==="pending"?(a(),s("span",me,"en Attente")):t.value.status==="completed"?(a(),s("span",pe,"Payé")):(a(),s("span",xe,"Rejeter"))]),e("p",ve,[l("Paiement au Freelance : "),t.value.is_paid!=null?(a(),s("span",ge,"Payé")):(a(),s("span",he,"en Attente"))]),t.value.feedback!=null?(a(),s("p",be,[l("statut : "),t.value.feedback.etat==="En attente de traitement"?(a(),s("span",fe,"En attente de traitement")):t.value.feedback.etat==="Livré"?(a(),s("span",ye,"Livré")):t.value.feedback.etat==="En cours de préparation"?(a(),s("span",ke,"En cours de préparation")):(a(),s("span",we,"En transit"))])):(a(),s("p",Ce,[l(" Etat de la commande : "),Ee]))]),e("div",Be,[Pe,e("div",Fe,[e("div",je,[o(p(M),{value:t.value.progress,class:"dark:!bg-gray-700"},null,8,["value"])]),e("p",Le,d(t.value.progress)+"%",1)])]),e("div",Ve,[ze,e("div",De,[o(q,{user:t.value.freelance_user,taille:"20"},null,8,["user"]),e("div",$e,[e("a",Ne,d(t.value.freelance_user.name),1)])])]),e("div",qe,[e("h1",{onClick:n[0]||(n[0]=r=>h.value=!h.value),class:"flex items-start gap-2 text-lg font-bold cursor-pointer lg:text-xl"},[l(" Rapport Envoyer "),e("button",null,[(a(),s("svg",{class:j([{"rotate-180":h.value},"w-6 h-6 fill-current"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Te,2))])]),o(C,{when:h.value,class:""},{default:m(()=>[(a(),s("div",Ue,[(a(!0),s(O,null,S(t.value.rapports,r=>(a(),s("div",Me,[e("p",Oe,d(r.description),1),e("span",Se,d(r.created_at),1)]))),256))]))]),_:1},8,["when"])]),e("div",Re,[Ge,e("div",Ze,[t.value.transaction==null?(a(),s("div",He,Je)):k("",!0),e("div",Ke,[e("div",null,[o(_,{outlined:"",severity:"info",onClick:D,label:"Contact"})])]),((P=t.value.feedback)==null?void 0:P.etat)=="Livré"?(a(),s("div",Qe,[e("div",null,[o(_,{onClick:n[1]||(n[1]=r=>c.value=!c.value),outlined:"",severity:"info",label:"Feedback"})])])):k("",!0),((F=t.value.feedback)==null?void 0:F.etat)=="Livré"&&t.value.is_paid==null?(a(),s("div",We,[e("div",null,[o(_,{onClick:n[2]||(n[2]=r=>x.value=!x.value),outlined:"",severity:"success",label:"Debloquer Paiment"})])])):k("",!0),Xe,e("div",Ye,[o(_,{size:"small",raised:"",severity:"danger",label:"Annuler"})])])]),e("div",null,[e("div",et,[e("h1",tt,[l(" Transaction de paiement liée "),e("button",{onClick:n[3]||(n[3]=r=>g.value=!g.value)},[(a(),s("svg",{class:j([{"rotate-180":g.value},"w-6 h-6 fill-current"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},at,2))])]),o(C,{when:g.value},{default:m(()=>[t.value.transaction!=null?(a(),s("div",ot,[e("p",nt,[l("Numéro de transaction : "),e("span",lt,"#"+d(t.value.transaction.transaction_numero),1)]),e("p",rt,[l("Méthode de paiement : "),e("span",null,"••• "+d(t.value.transaction.payment_method.last4),1)]),e("div",dt,[e("div",it,[e("p",ct,[l("Montant payé : "),e("span",ut,d(t.value.transaction.amount)+" $ ",1)])])]),e("div",_t,[o(p(w),{href:u.route("user.transactions.one",[t.value.transaction.transaction_numero])},{default:m(()=>[mt]),_:1},8,["href"])])])):(a(),s("div",pt,vt))]),_:1},8,["when"])])])])]),o(E,{visible:c.value,"onUpdate:visible":n[6]||(n[6]=r=>c.value=r),position:"'bottom'",modal:"",header:"Feedback",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",gt,[e("div",null,[o(A,{modelValue:p(f).description,"onUpdate:modelValue":n[4]||(n[4]=r=>p(f).description=r),class:"w-full"},null,8,["modelValue"])]),e("div",ht,[o(_,{onClick:$,label:"Envoyer"}),o(_,{severity:"danger",onClick:n[5]||(n[5]=r=>c.value=!c.value),label:"Annuler"})])])]),_:1},8,["visible"]),o(E,{visible:x.value,"onUpdate:visible":n[7]||(n[7]=r=>x.value=r),position:"'bottom'",modal:"",header:"Confirmer Comannde Finis",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[e("div",bt,[ft,e("div",yt,[o(_,{onClick:N,severity:"success",label:"Oui, je confirme"})])])]),_:1},8,["visible"])])}}});export{Pt as default};
